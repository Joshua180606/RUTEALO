{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center mt-4">
    <div class="col-md-6">
        <div class="card shadow-lg">
            <div class="card-body p-5">
                <h3 class="text-center mb-4 fw-bold">üìö Crear Cuenta RUTEALO</h3>
                
                <form action="/register" method="POST" id="registerForm">
                    <!-- DATOS PERSONALES -->
                    <fieldset class="mb-4">
                        <legend class="fs-5 fw-bold mb-3">üìã Datos Personales</legend>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Nombres</label>
                                <input type="text" name="nombres" class="form-control" 
                                    placeholder="Ej: Joshua Jian" required>
                                <small class="text-muted">Tu nombre de pila</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Apellidos</label>
                                <input type="text" name="apellidos" class="form-control" 
                                    placeholder="Ej: Cora Salazar" required>
                                <small class="text-muted">Tus apellidos</small>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Correo Electr√≥nico</label>
                            <input type="email" name="email" class="form-control" 
                                placeholder="ejemplo@gmail.com" required>
                            <small class="text-muted">Usaremos esto para notificaciones</small>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Tel√©fono</label>
                            <input type="tel" name="telefono" class="form-control" 
                                placeholder="999532956" required>
                            <small class="text-muted">Contacto de emergencia</small>
                        </div>
                    </fieldset>

                    <!-- CUENTA Y SEGURIDAD -->
                    <fieldset class="mb-4">
                        <legend class="fs-5 fw-bold mb-3">üîê Cuenta y Seguridad</legend>
                        
                        <div class="mb-3">
                            <label class="form-label">Usuario (ID √∫nico)</label>
                            <input type="text" name="usuario" class="form-control" 
                                placeholder="tu_usuario_123" required>
                            <small class="text-muted">Entre 3 y 50 caracteres, letras y n√∫meros</small>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Contrase√±a</label>
                            <input type="password" name="password" class="form-control" 
                                id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                            <small class="text-muted">
                                M√≠nimo 8 caracteres, may√∫scula, min√∫scula, n√∫mero
                            </small>
                            <div class="mt-2">
                                <small id="passwordStrength" class="d-block"></small>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Confirmar Contrase√±a</label>
                            <input type="password" name="password_confirm" class="form-control" 
                                id="password_confirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                            <small id="passwordMatch" class="d-block"></small>
                        </div>
                    </fieldset>

                    <!-- PREFERENCIAS DE ESTUDIO -->
                    <fieldset class="mb-4">
                        <legend class="fs-5 fw-bold mb-3">‚è±Ô∏è Preferencias de Estudio</legend>
                        
                        <div class="mb-3">
                            <label class="form-label">Tiempo disponible diariamente (minutos)</label>
                            <input type="number" name="tiempo_diario" class="form-control" 
                                placeholder="120" min="15" max="480" required>
                            <small class="text-muted">
                                Cu√°ntos minutos puedes dedicar al estudio por d√≠a (15-480 min)
                            </small>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">D√≠a de descanso semanal</label>
                            <select name="dia_descanso" class="form-control" required>
                                <option value="">-- Selecciona un d√≠a --</option>
                                <option value="Lunes">Lunes</option>
                                <option value="Martes">Martes</option>
                                <option value="Mi√©rcoles">Mi√©rcoles</option>
                                <option value="Jueves">Jueves</option>
                                <option value="Viernes">Viernes</option>
                                <option value="S√°bado">S√°bado</option>
                                <option value="Domingo">Domingo</option>
                            </select>
                            <small class="text-muted">No recibir√°s estudios este d√≠a</small>
                        </div>
                    </fieldset>

                    <!-- T√âRMINOS -->
                    <div class="mb-4">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="terms" 
                                name="terms" required>
                            <label class="form-check-label" for="terms">
                                Acepto los t√©rminos y condiciones de RUTEALO
                            </label>
                        </div>
                    </div>

                    <!-- BOTONES -->
                    <button type="submit" class="btn btn-success btn-lg w-100 mb-2">
                        ‚úì Crear Cuenta
                    </button>
                </form>

                <div class="mt-3 text-center">
                    <small>¬øYa tienes cuenta? 
                        <a href="/login" class="fw-bold text-success">Inicia sesi√≥n</a>
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Script para validar contrase√±a en tiempo real -->
<script>
document.getElementById('password').addEventListener('input', function() {
    const password = this.value;
    const strength = document.getElementById('passwordStrength');
    
    let hasUpper = /[A-Z]/.test(password);
    let hasLower = /[a-z]/.test(password);
    let hasNumber = /[0-9]/.test(password);
    let isLongEnough = password.length >= 8;
    
    if (isLongEnough && hasUpper && hasLower && hasNumber) {
        strength.className = 'text-success';
        strength.textContent = '‚úì Contrase√±a fuerte';
    } else {
        strength.className = 'text-warning';
        strength.textContent = '‚ö† Contrase√±a d√©bil: ' + 
            (!hasUpper ? 'sin may√∫scula ' : '') +
            (!hasLower ? 'sin min√∫scula ' : '') +
            (!hasNumber ? 'sin n√∫mero ' : '') +
            (!isLongEnough ? '(m√≠n 8 caracteres)' : '');
    }
});

document.getElementById('password_confirm').addEventListener('input', function() {
    const password = document.getElementById('password').value;
    const confirm = this.value;
    const match = document.getElementById('passwordMatch');
    
    if (confirm === '') {
        match.textContent = '';
        match.className = '';
    } else if (password === confirm) {
        match.className = 'text-success';
        match.textContent = '‚úì Las contrase√±as coinciden';
    } else {
        match.className = 'text-danger';
        match.textContent = '‚úó Las contrase√±as no coinciden';
    }
});
</script>

<style>
    fieldset {
        border: 1px solid #e0e0e0;
        border-radius: 0.5rem;
        padding: 1.5rem;
        background-color: #f9f9f9;
    }
    
    legend {
        padding: 0 0.5rem;
        color: #333;
    }
    
    .card {
        border: 2px solid #28a745;
        border-radius: 1rem;
    }
</style>
{% endblock %}